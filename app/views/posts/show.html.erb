<div class="card mb-4">
  <div class="card-body">
    <h1 class="card-title"><%= @post.title %></h1>
    <p class="text-muted">
      Posted by <%= @post.user.username %> <%= time_ago_in_words(@post.created_at) %> ago
    </p>
    <div class="card-text">
      <%= simple_format(@post.content) %>
    </div>
    <% if Current.user == @post.user %>
      <div class="mt-3">
        <%= link_to "Edit", edit_post_path(@post), class: "btn btn-secondary" %>
        <%= button_to "Delete", post_path(@post), 
            method: :delete, 
            class: "btn btn-danger", 
            form: { style: "display: inline-block;" } %>
      </div>
    <% end %>
  </div>
</div>

<div class="mt-4">
  <h3>Comments</h3>
  <% if Current.user %>
    <%= form_with(model: [@post, Comment.new], class: "mb-4") do |f| %>
      <div class="mb-3">
        <%= f.text_area :content, class: "form-control", rows: 3, placeholder: "Add a comment..." %>
      </div>
      <%= f.submit "Post Comment", class: "btn btn-primary" %>
    <% end %>
  <% end %>
</div>